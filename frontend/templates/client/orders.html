{% extends "base.html" %}
{% block title %}Mes commandes{% endblock %}
{% block content %}
<h2>Mes commandes</h2>
<table class="table">
  <thead>
    <tr>
      <th>ID</th><th>Restaurant</th><th>Zone</th>
      <th>Total (â‚¬)</th><th>Statut</th><th>Actions</th>
    </tr>
  </thead>
  <tbody>
  {% for c in commandes %}
    <tr>
      <td>{{ c.id_commande }}</td>
      <td>{{ c.id_restaurant }}</td>
      <td>{{ c.zone }}</td>
      <td>{{ '%.2f'|format(c.montant_total_client or 0) }}</td>
      <td>{{ c.statut }}</td>
      <td>
        {% if c.statut in ['CREEE', 'ANONCEE'] %}
          <form method="post" action="{{ url_for('client_cancel', order_id=c.id_commande) }}">
            <input name="motif" placeholder="Motif (optionnel)">
            <button class="btn btn-sm btn-outline-danger">Annuler</button>
          </form>
        {% else %}
          <span class="muted">Non annulable</span>
        {% endif %}
      </td>
    </tr>
  {% else %}
    <tr><td colspan="6">Aucune commande.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
