{% extends "base.html" %}
{% block title %}Espace Restaurant{% endblock %}
{% block content %}
<div class="page-header">
  <h1>ğŸª Commandes du restaurant {{ session.user.nom }}</h1>
  <p class="muted">GÃ©rez les commandes reÃ§ues par votre restaurant</p>
</div>

<div class="filter">
  <form method="get">
    <div class="filter-group">
      <label>Filtrer par statut :</label>
      <select name="statut" onchange="this.form.submit()">
        <option value="">(Tous)</option>
        {% for s in ['CREEE','ANONCEE','ASSIGNEE','EN_LIVRAISON','LIVREE','ANNULEE'] %}
          <option value="{{s}}" {% if request.args.get('statut') == s %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
      </select>
    </div>
  </form>
</div>

<div class="orders-section">
  {% if orders %}
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Zone</th>
          <th>Adresse</th>
          <th>Total (â‚¬)</th>
          <th>Statut</th>
          <th>Livreur</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
      {% for o in orders %}
        <tr>
          <td><strong>{{ o.id_commande }}</strong></td>
          <td><span class="zone-badge">ğŸ“ {{ o.zone }}</span></td>
          <td>{{ o.livraison_adresse }}</td>
          <td><strong>{{ '%.2f'|format(o.montant_total_client or 0) }} â‚¬</strong></td>
          <td><span class="status-badge status-{{ o.statut }}">{{ o.statut }}</span></td>
          <td>{{ o.id_livreur_assigne or '-' }}</td>
          <td>
            <a class="btn btn-sm btn-outline-primary"
               href="{{ url_for('restaurant_order_details', order_id=o.id_commande) }}">
               ğŸ“‹ DÃ©tails
            </a>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="empty-state">
      <h3>ğŸ“¦ Aucune commande pour le moment</h3>
      <p class="muted">Vos commandes apparaÃ®tront ici dÃ¨s qu'elles seront passÃ©es</p>
    </div>
  {% endif %}
</div>
{% endblock %}
